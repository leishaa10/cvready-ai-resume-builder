<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CVReady - AI Resume Builder</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        const MAX_JOBS = 10;
        const MAX_EDUCATION = 5;
        const MAX_PROJECTS = 10;

        function CVReadyBuilder() {
          const [activeTab, setActiveTab] = useState('basic');
          const [isGenerating, setIsGenerating] = useState(false);
          const [userEmail, setUserEmail] = useState('');
          
          const [formData, setFormData] = useState({
            basicInfo: {
              name: '',
              email: '',
              phone: '',
              location: '',
              linkedin: '',
              jobTitle: '',
              skills: '',
              summary: ''
            },
            experiences: [{ title: '', company: '', start: '', end: '', responsibilities: '' }],
            education: [{ degree: '', institution: '', year: '' }],
            projects: [{ name: '', description: '', technologies: '' }]
          });

          const [generatedResume, setGeneratedResume] = useState('');

          const handleBasicInfoChange = (field, value) => {
            setFormData(prev => ({
              ...prev,
              basicInfo: { ...prev.basicInfo, [field]: value }
            }));
          };

          const addExperience = () => {
            if (formData.experiences.length < MAX_JOBS) {
              setFormData(prev => ({
                ...prev,
                experiences: [...prev.experiences, { title: '', company: '', start: '', end: '', responsibilities: '' }]
              }));
            }
          };

          const removeExperience = (index) => {
            setFormData(prev => ({
              ...prev,
              experiences: prev.experiences.filter((_, i) => i !== index)
            }));
          };

          const updateExperience = (index, field, value) => {
            setFormData(prev => ({
              ...prev,
              experiences: prev.experiences.map((exp, i) => 
                i === index ? { ...exp, [field]: value } : exp
              )
            }));
          };

          const addEducation = () => {
            if (formData.education.length < MAX_EDUCATION) {
              setFormData(prev => ({
                ...prev,
                education: [...prev.education, { degree: '', institution: '', year: '' }]
              }));
            }
          };

          const removeEducation = (index) => {
            setFormData(prev => ({
              ...prev,
              education: prev.education.filter((_, i) => i !== index)
            }));
          };

          const updateEducation = (index, field, value) => {
            setFormData(prev => ({
              ...prev,
              education: prev.education.map((edu, i) => 
                i === index ? { ...edu, [field]: value } : edu
              )
            }));
          };

          const addProject = () => {
            if (formData.projects.length < MAX_PROJECTS) {
              setFormData(prev => ({
                ...prev,
                projects: [...prev.projects, { name: '', description: '', technologies: '' }]
              }));
            }
          };

          const removeProject = (index) => {
            setFormData(prev => ({
              ...prev,
              projects: prev.projects.filter((_, i) => i !== index)
            }));
          };

          const updateProject = (index, field, value) => {
            setFormData(prev => ({
              ...prev,
              projects: prev.projects.map((proj, i) => 
                i === index ? { ...proj, [field]: value } : proj
              )
            }));
          };

          const generateResumeWithAI = async () => {
            setIsGenerating(true);
            
            try {
              const { basicInfo, experiences, education, projects } = formData;
              
              const prompt = `Create a professional, ATS-friendly resume for:

Name: ${basicInfo.name}
Email: ${basicInfo.email}
Phone: ${basicInfo.phone}
Location: ${basicInfo.location}
LinkedIn: ${basicInfo.linkedin}
Target Job: ${basicInfo.jobTitle}

Summary: ${basicInfo.summary || 'Create a professional summary based on the experience'}

Skills: ${basicInfo.skills}

Experience:
${experiences.map(exp => exp.title ? `- ${exp.title} at ${exp.company} (${exp.start} - ${exp.end})\n${exp.responsibilities}` : '').join('\n\n')}

Education:
${education.map(edu => edu.degree ? `- ${edu.degree}, ${edu.institution}, ${edu.year}` : '').join('\n')}

Projects:
${projects.map(proj => proj.name ? `- ${proj.name}\n${proj.description}\nTech: ${proj.technologies}` : '').join('\n\n')}

Create a well-formatted, professional resume with clear sections, bullet points, and ATS-friendly formatting.`;

              const response = await fetch("https://api.anthropic.com/v1/messages", {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                },
                body: JSON.stringify({
                  model: "claude-sonnet-4-20250514",
                  max_tokens: 2000,
                  messages: [{ role: "user", content: prompt }],
                })
              });

              const data = await response.json();
              const resumeText = data.content[0].text;
              setGeneratedResume(resumeText);
              setActiveTab('generate');
              alert('âœ… Resume generated successfully!');
            } catch (error) {
              console.error('Error:', error);
              alert('Error generating resume. Please try again.');
            } finally {
              setIsGenerating(false);
            }
          };

          const validateEmail = (email) => {
            return /^[\w\.-]+@[\w\.-]+\.\w+$/.test(email);
          };

          const downloadResume = (format) => {
            const fileName = `${formData.basicInfo.name.replace(/\s+/g, '_') || 'resume'}_resume.${format}`;
            const blob = new Blob([generatedResume], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = fileName;
            a.click();
            URL.revokeObjectURL(url);
          };

          const getResumeStats = () => {
            const wordCount = generatedResume.split(/\s+/).length;
            const charCount = generatedResume.length;
            const sections = (generatedResume.match(/\n\n/g) || []).length;
            return { wordCount, charCount, sections };
          };

          const stats = generatedResume ? getResumeStats() : null;

          return (
            <div className="min-h-screen bg-gradient-to-br from-purple-100 via-blue-100 to-cyan-100 p-4">
              <div className="max-w-7xl mx-auto">
                <div className="bg-white rounded-2xl shadow-xl p-6 mb-6">
                  <div className="flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
                    <div className="flex items-center gap-4">
                      <div className="text-6xl">ğŸ“„</div>
                      <div>
                        <h1 className="text-4xl font-bold text-gray-800">CVReady</h1>
                        <p className="text-gray-600">Your AI-Powered Resume Builder</p>
                        <p className="text-sm text-gray-500 mt-1">Auto-Enhancement Enabled</p>
                      </div>
                    </div>
                    
                    <div className="w-full md:w-auto">
                      <input
                        type="email"
                        value={userEmail}
                        onChange={(e) => setUserEmail(e.target.value)}
                        placeholder="Your email (optional)"
                        className="w-full md:w-64 px-4 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 focus:outline-none"
                      />
                      {userEmail && validateEmail(userEmail) && (
                        <p className="text-sm text-green-600 mt-1">âœ… Email validated</p>
                      )}
                    </div>
                  </div>
                </div>

                <div className="bg-white rounded-2xl shadow-xl overflow-hidden">
                  <div className="flex border-b overflow-x-auto">
                    <button
                      onClick={() => setActiveTab('basic')}
                      className={`flex-1 min-w-max px-6 py-4 font-semibold transition-colors ${
                        activeTab === 'basic' ? 'bg-purple-600 text-white' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                      }`}
                    >
                      ğŸ“ Basic Info
                    </button>
                    <button
                      onClick={() => setActiveTab('experience')}
                      className={`flex-1 min-w-max px-6 py-4 font-semibold transition-colors ${
                        activeTab === 'experience' ? 'bg-purple-600 text-white' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                      }`}
                    >
                      ğŸ’¼ Experience
                    </button>
                    <button
                      onClick={() => setActiveTab('generate')}
                      className={`flex-1 min-w-max px-6 py-4 font-semibold transition-colors ${
                        activeTab === 'generate' ? 'bg-purple-600 text-white' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                      }`}
                    >
                      ğŸ“„ Generate
                    </button>
                  </div>

                  <div className="p-6">
                    {activeTab === 'basic' && (
                      <div className="space-y-6">
                        <h2 className="text-2xl font-bold text-gray-800">Basic Information</h2>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                          <div>
                            <label className="block text-sm font-semibold text-gray-700 mb-2">Full Name *</label>
                            <input
                              type="text"
                              value={formData.basicInfo.name}
                              onChange={(e) => handleBasicInfoChange('name', e.target.value)}
                              className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"
                              placeholder="John Doe"
                            />
                          </div>

                          <div>
                            <label className="block text-sm font-semibold text-gray-700 mb-2">Email *</label>
                            <input
                              type="email"
                              value={formData.basicInfo.email}
                              onChange={(e) => handleBasicInfoChange('email', e.target.value)}
                              className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"
                              placeholder="john@example.com"
                            />
                          </div>

                          <div>
                            <label className="block text-sm font-semibold text-gray-700 mb-2">Phone *</label>
                            <input
                              type="tel"
                              value={formData.basicInfo.phone}
                              onChange={(e) => handleBasicInfoChange('phone', e.target.value)}
                              className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"
                              placeholder="+1 (555) 123-4567"
                            />